# Elpaso :bar_chart:

Paying with a credit card usually comes with an online banking option, which can handle the finances management for the user. However, cash payments are trickier.  
Elpaso is a containerized microservices based project destined to offer a solution to cash payments management by scanning receipts in Romanian and generating financial analysis reports and product classification.

## Features

- Scan a receipt in Romanian and generate an editable financial report thanks to data analysis and OCR processing
- Keep track of everyday's spendings, no matter the payment method
- Get a classification of products based on a romanian database built specifically for Elpaso
- Export the results as CSV, delete or add other entries 
- Fast authentication with OAuth2.0


## Tech

:computer: Web application 

- **ReactJS** - Javascript client side library
- **Django** - Django backend framework
- **PostgreSQL** - Relational database management system
- **PgAdmin** - tool used for interracting with the database
- **Firebase** - UI authentication library
- **Google Cloud storage** - OAuth 2.0 and storage platform
- [**OCRly**](https://rapidapi.com/nadkabbani/api/ocrly-image-to-text) - OCR API 
- **Certbot** - Tool used for HTTPS Letâ€™s Encrypt certificates 

:rocket: Deployment

- **Docker** - PaS for service containerization 
- **Docker Swarm** - container orchestration tool
- **Docker machine** - Virtual machines management tool 
- **Nginx** - reverse proxy
- **Gluster FS** - Distributed File System
- **Sematext** - monitoring agent
- **AWS/Digital Ocean** - IaaS platforms for VMs


## DEMO 

<img src="https://iili.io/HnV0kdX.png" alt="drawing" width="200"/>   <img src="https://iili.io/HnVXSFR.png" alt="drawing" width="200"/>

<img src="https://iili.io/HnVjTeS.png" alt="drawing" width="200"/>   <img src="https://iili.io/HnVjPBs.png" alt="drawing" width="200"/>

<img src="https://iili.io/HnVh8xe.png" alt="drawing" width="200"/>  

You can check out a **functional app video Demo** [here](https://www.youtube.com/watch?v=cYBhlQmaEG0)

  
# Run the local Dockerized version 
  
 Steps: 
  1. Clone the repository on the `elpaso-compose` branch
  2. Complete the credentials files (.env.*, firebase-config and Google_Cloud_credentials) by generating your own credentials.
    ## e.g. in .env.local, replace **REACT_APP_FIREBASE_API_KEY**=xxxx
  3. Install docker-compose and execute `docker-compose up` to start the containers and the services running inside them. 
  4. Connect on [http://localhost:3000](http://localhost:3000/) and start testing!
  
 ## Deploy the stack yourself 
 
 > At the moment the Orchestrated version is not deployed, due to costs generated by maintaining the VMs.

 1. Clone the repository on the `elpaso-swarm` branch
 2. Configure the `docker-compose-stack.yml` file with the desired number of replicas, based on the resources you have available.
 3. Configure several virtual machines which will be the workers and a manager for the Swarm. Refer to [this](https://docs.docker.com/engine/swarm/swarm-mode/) for more information on how to do so.
 4. Install Docker on the virtual machines and [Configure the Linux Firewall for Docker Swarm](https://www.digitalocean.com/community/tutorials/how-to-configure-the-linux-firewall-for-docker-swarm-on-ubuntu-16-04)
 5. Complete the credentials files (.env.*, firebase-config and Google_Cloud_credentials) by generating your own credentials.
    e.g. in .env.local, replace **REACT_APP_FIREBASE_API_KEY**=xxxx 
 6. Use a file transfer protocol such as **SCP** to move the secret keys completed at step 5. and the reverse_proxy/ folder securely to each of the VMs.
 6. Associate a domain to your manager's IP using, for example, the No-IP domain and host service provider.
 7. Generate Let's Encrypt HTTPS certificates using Certbot. Refer to [this](https://finnian.io/blog/ssl-with-docker-swarm-lets-encrypt-and-nginx/) for more information.
 8. Execute `docker stack deploy -c docker-compose-stack.yml elpaso` to start the stack and access it on the port 3000 of the domain you chose at step 6. 

!In this project, Sematext was used as a monitoring agent. The configuration for it can be skipped if you do not wish to test the monitoring feature. 

That's all! Enjoy safely monitoring your expenses! :sparkles:	


  
